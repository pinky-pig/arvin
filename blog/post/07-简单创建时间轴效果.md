---
title: ç®€å•åˆ›å»ºæ—¶é—´è½´æ•ˆæœ
date: 2024/01/08
desc: ç®€å•åˆ›å»ºæ—¶é—´è½´æ•ˆæœ
tags: ['#å…¨éƒ¨','#ç®€å•']
cover: https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6f4dd4e2fed14515b7b950265050884b~tplv-k3u1fbpfcp-watermark.image?
---

[[toc]]

![timeline.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6f4dd4e2fed14515b7b950265050884b~tplv-k3u1fbpfcp-watermark.image?)

# å‰è¨€

å› ä¸ºæœ€è¿‘åšä¸€ä¸ªåˆ›å»ºSvgåŠ¨ç”»çš„Demoï¼Œéœ€è¦ä¸€ä¸ªæ—¶é—´è½´å±•ç¤ºç¼–è¾‘æ•ˆæœï¼Œæ‰€ä»¥ç”¨CSSç®€å•å®ç°äº†ä¸€ä¸‹ğŸ˜†ï¼Œå…¶å®ä¸»è¦å°±ä½¿ç”¨åˆ°äº†animation-play-stateå±æ€§ã€‚

# ä»£ç é¢„è§ˆ

Stackblitzï¼š [https://stackblitz.com/edit/vitejs-vite-8zkms2?file=src/components/common/Timeline.vue](https://stackblitz.com/edit/vitejs-vite-8zkms2?file=src/components/common/Timeline.vue)

# æŠ€æœ¯æ ˆ

- [Animation](https://developer.mozilla.org/zh-CN/docs/Web/CSS/animation)
- Vue3
- UnoCSS
  > CSS animation:
  > animation-name -- åŠ¨ç”»åå­—
  > animation-duration -- æŒç»­æ—¶é—´
  > animation-timing-function -- é€Ÿåº¦æ›²çº¿ï¼ˆè´å¡å°”ï¼‰ï¼š linear...
  > animation-delay -- å»¶è¿Ÿæ—¶é—´
  > animation-iteration-count -- æ’­æ”¾æ¬¡æ•° ï¼šinfinite...
  > animation-direction -- åŠ¨ç”»æ–¹å‘ ï¼š normal/reverse/alternate...
  > animation-fill-mode -- åŠ¨ç”»ä¸æ’­æ”¾çš„æ—¶å€™ï¼Œè¦åº”ç”¨åˆ°å…ƒç´ çš„æ ·å¼ ï¼šforwards(ç§»åŠ¨divä»å·¦åˆ°å³ï¼Œç„¶åå°±åœç•™ åœ¨å³)/backwards
  > animation-play-state -- åŠ¨ç”»æ˜¯å¦æš‚åœ ï¼š paused/running

# å®ç°æ­¥éª¤

- ğŸ•ä¸Šä¸‹å¸ƒå±€é¢æ¿
- ğŸ”æ’­æ”¾ã€æš‚åœã€åœæ­¢å›¾æ ‡æŒ‰é’®åŠåŠ¨ç”»
- ğŸŸæ—¶é—´æ¡ body èƒŒæ™¯
- ğŸ³å¸§çº¿åŠå…¶ç§»åŠ¨

## å¸ƒå±€

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/317fce817bca422e963e33c127d6ce7d~tplv-k3u1fbpfcp-watermark.image?)

ä¸Šä¸‹å¸ƒå±€ï¼Œä¸¤éƒ¨åˆ†ï¼štopã€bodyã€‚flexå¸ƒå±€ï¼Œdirectionè®¾ç½®columnï¼Œtopå…ƒç´ è®¾ç½®heightï¼Œbodyå…ƒç´ flex-1ã€‚
topéƒ¨åˆ†è®¾ç½®é˜´å½±ï¼Œbox-shadow: 0 2px 15px 4px #00000090;

> flexå¸ƒå±€æ˜¯æ¯”è¾ƒåŸºç¡€çš„ï¼Œå¯å‚è€ƒé˜®ä¸€å³°è€å¸ˆçš„blogå­¦ä¹ ã€‚http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html
> box-shadow: /_ x åç§»é‡ | y åç§»é‡ | é˜´å½±æ¨¡ç³ŠåŠå¾„ | é˜´å½±æ‰©æ•£åŠå¾„ | é˜´å½±é¢œè‰² _/
> ä»»æ„æ•°é‡çš„é˜´å½± ç”¨é€—å·éš”å¼€å°±å¥½äº†

```html
<div
  class="flex flex-col w-800px h-280px rounded-3xl bg-[var(--animate-bg-color)] overflow-hidden"
>
  <!-- top -->
  <div
    class="top w-full h-14 flex flex-row items-center justify-between px-4"
  ></div>

  <!-- body -->
  <div class="w-full flex-1 px-5 min-h-100px"></div>
</div>
```

## æŒ‰é’®åŠåŠ¨ç”»

![btn-animate.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/32ad4c576cca4176a2c463e44ed08f1c~tplv-k3u1fbpfcp-watermark.image?)

æŒ‰é’®æ˜¯ä» [@iconify-json/carbon](https://icones.netlify.app/collection/carbon) æ‹¿çš„ã€‚

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/582e61dde9694e73964f29401a53109f~tplv-k3u1fbpfcp-watermark.image?)

```html
<button class="rounded-full">
  <div
    class="w-8 h-8 cursor-pointer bg-green-400 animate-btn"
    i="carbon-play-outline"
  />
</button>
<div
  class="w-8 h-8 cursor-pointer bg-green-400 animate-btn"
  i="carbon-pause-outline"
/>
<div
  class="w-8 h-8 cursor-pointer bg-green-400 animate-btn"
  i="carbon-stop-outline"
/>
```

åŠ¨ç”»ä¸»è¦æ˜¯é…åˆ [transition](https://developer.mozilla.org/zh-CN/docs/Web/CSS/transition) è®¾ç½® [`outline`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/outline)ã€‚outline è·Ÿ border å·®ä¸å¤šï¼Œä¸è¿‡åŒºåˆ«æ˜¯ outline ä¸å æ®ç©ºé—´ï¼Œç»˜åˆ¶äºå…ƒç´ å†…å®¹å‘¨å›´ã€‚**`outline-offset`**ç”¨äºè®¾ç½® outline ä¸ä¸€ä¸ªå…ƒç´ è¾¹ç¼˜æˆ–è¾¹æ¡†ä¹‹é—´çš„é—´éš™ã€‚

> CSS transition:
> transition-property -- æŒ‡å®šCSSå±æ€§çš„nameï¼Œtransitionæ•ˆæœ
> transition-duration -- æŒç»­æ—¶é—´
> transition-timing-function -- æŒ‡å®šCSSå±æ€§çš„nameï¼Œtransitionæ•ˆæœ
> transition-delay -- å»¶è¿Ÿæ—¶é—´

```css
button {
  outline: 2px dotted transparent;
  outline-offset: -2px;
  transition:
    outline 0.12s ease,
    outline-offset 0.12s ease;
}
button:focus {
  outline: 2.5px dashed var(--primary-color) !important;
  stroke-dashoffset: 12px;
  outline-offset: 2px;
  transition:
    outline 0.12s ease,
    outline-offset 0.12s ease;
  transform: scaleX(1.1) scaleY(1.1);
}
button:active {
  outline: 2px dotted transparent;
  transform: scaleX(1) scaleY(1);
}
```

## æ—¶é—´çº¿åŠbody èƒŒæ™¯

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0cdccf6a8c904717a8bb3e3ad10fcb68~tplv-k3u1fbpfcp-watermark.image?)

### æ—¶é—´çº¿

ä»¥ 5% ä¸ºä¸€ä¸ªå•ä½ï¼Œä»0åˆ°100%ï¼Œå…±æœ‰21ä¸ªæ•°ï¼Œ `v-for="item,index in 21"`ä¸­ item æ˜¯ä» 1 åˆ°21 ï¼Œindexæ˜¯ä» 0 åˆ° 20 ã€‚

```html
<div class="tick" v-for="i in 21" :key="i">
  <b>{{(i*5) - 5}}%</b>
</div>
```

### æ ·å¼

â€œçˆ¶ç›¸å­ç»â€å®šä½ï¼Œå­å…ƒç´ 21ä¸ªflex && justify-betweenï¼Œnth-child(even) å¶æ•°ä¸æ˜¾ç¤ºæ–‡å­—ã€‚

```css
.timelineTicks {
  @apply absolute w-full top-0 left-0 flex flex-row justify-between;
  .tick {
    height: 10px;
    width: 2px;
    font-size: 0.6em;
    position: relative;
    background: linear-gradient(360deg, currentColor, #00000000);

    b {
      position: absolute;
      width: 20px;
      text-align: center;
      left: 50%;
      bottom: -14px;
      margin-left: -10px;
      top: 15px;
    }

    &:nth-child(even) {
      b {
        display: none;
      }
    }
  }
}
```

2. èƒŒæ™¯çš„è¯ï¼Œç‚¹çŠ¶èƒŒæ™¯ï¼Œæœ¬æ¥æ‰“ç®—ç›´æ¥ä½¿ç”¨ svg pattern å®½é«˜é“ºæ»¡ï¼Œä½†æ˜¯è€ƒè™‘åˆ°åé¢åˆ—è¦å’Œæ—¶é—´æ¡å¯¹é½ï¼Œäºæ˜¯å°±åªæœ‰ä¸€åˆ—svgï¼Œç„¶åå›¾çœäº‹ç®€å•çš„å¾ªç¯éå†äº†21ä¸ªğŸ˜…ã€‚

```html
<div v-for="i in 21" :key="i">
  <svg width="5" height="100%">
    <defs>
      <pattern id="rect" patternUnits="userSpaceOnUse" width="5" height="40">
        <rect y="5" width="5" height="5" fill="currentColor" rx="5"></rect>
      </pattern>
    </defs>
    <rect id="canvas" width="5" height="100%" fill="url(#rect)" />
  </svg>
</div>
```

## å¸§çº¿åŠæ’­æ”¾

![animate.gif](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a53d3d4b61ba4ec6a6393592dfd69ad7~tplv-k3u1fbpfcp-watermark.image?)

### å¸§çº¿

è¿™é‡Œçš„çº¿ï¼Œä¹Ÿæ˜¯å›¾äº†ä¸ªæ–¹ä¾¿ï¼Œä½¿ç”¨ `:before` ä¼ªå…ƒç´ ç»˜åˆ¶äº†ä¸€ä¸ªäº”è¾¹å½¢åŠ ä¸€æ¡çº¿æ„é€ ã€‚ä¼ªå…ƒç´ çš„è¯ä½¿ç”¨äº† [clip-path](https://developer.mozilla.org/zh-CN/docs/Web/CSS/clip-path) åˆ‡å‰²çš„ï¼Œå¯å‚è€ƒè¿™ä¸ª [tool](https://www.html.cn/tool/css-clip-path/) å¿«é€Ÿç”Ÿæˆã€‚

### åŠ¨ç”»

åŠ¨ç”»çš„è¯å°±æ˜¯ ã€‚å¸§çº¿ â€œçˆ¶ç›¸å­ç»â€å®šä½ï¼Œè®¾ç½®å…¶leftï¼Œ0åˆ°100%ç§»åŠ¨ã€‚è¿™æ ·å°±å¯ä»¥ä¸€ç›´å·¦å³ç§»åŠ¨ï¼Œè®¾ç½®å…¶
`animation-play-state`ï¼Œè®©å…¶æš‚åœæˆ–æ’­æ”¾ã€‚

```css
/* è®¾ç½®ç»™å¸§çº¿ */
animation:scrubAnimation 5s linear infinite running
/* å®šä¹‰çš„åŠ¨ç”» */
@keyframes scrubAnimation {
  0% {
    left: 0%;
  }
  100% {
    left: 100%;
  }
}
```

### æŒ‰é’®æ§åˆ¶åŠ¨ç”»

å°†æ§åˆ¶äº‹ä»¶ç»‘å®šåˆ°æŒ‰é’®ä¸Šï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯ vue3 çš„ css çš„ [v-bind](https://cn.vuejs.org/api/sfc-css-features.html#v-bind-in-css)å‡½æ•° ï¼Œä¹Ÿå¯ä»¥å°†å…¶æ ·å¼å†™åˆ°åŠ¨æ€ style ä¸Šï¼Œä¾‹å¦‚ `:style="{animation-play-state: scrubberAnimationState }"`ã€‚åˆ†åˆ«ç»™ä¸‰ä¸ªæŒ‰é’®ï¼Œç»‘å®šè§¦å‘æ›´æ”¹ animation å’Œ `animation-play-state: running/paused` çš„å€¼å°±å¥½äº†ã€‚

```ts
const scrubberPositionLeft = ref('0')
const scrubberAnimationState = ref('')
const scrubberAnimation = ref('')
function startPlay() {
  store.isPlay = true
  scrubberAnimation.value = 'scrubAnimation 5s linear infinite running'
  scrubberAnimationState.value = 'running'
}
function pausePlay() {
  store.isPlay = false
  scrubberAnimationState.value = 'paused'
}
function stopPlay() {
  if (store.isPlay) {
    // if æ­£åœ¨æ’­æ”¾ $reSet
    store.isPlay = false
    scrubberAnimation.value = ''
  }
}
```

# é™„è¨€

ä»¥ä¸Šï¼Œä¸€ä¸ªç®€å•çš„æ—¶é—´çº¿çš„åŠ¨ç”»å°±å®Œæˆäº†ï¼Œä»£ç å¾ˆç®€å•ï¼Œå¾…æ”¹è¿›çš„è¿˜æœ‰å¾ˆå¤šï¼Œåé¢å†ä¿®æ”¹ï¼Œè¿™é‡Œåœ¨æ­¤è®°å½•ã€‚

Stackblitzåœ°å€ï¼š [https://stackblitz.com/edit/vitejs-vite-8zkms2?file=src/components/common/Timeline.vue](https://stackblitz.com/edit/vitejs-vite-8zkms2?file=src/components/common/Timeline.vue)
githubåœ°å€ï¼š[https://github.com/pinky-pig/wwb-vue-demo.git](https://github.com/pinky-pig/wwb-vue-demo.git)
